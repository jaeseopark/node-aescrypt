<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>node-aescrypt</title>
	<meta name="description" content="Documentation for node-aescrypt">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">node-aescrypt</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>node-aescrypt</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#node-aescrypt" id="node-aescrypt" style="color: inherit; text-decoration: none;">
					<h1>node-aescrypt</h1>
				</a>
				<p><a href="https://travis-ci.org/judahtanthony/node-aescrypt"><img src="https://img.shields.io/travis/judahtanthony/node-aescrypt.svg" alt="Build Status"></a>
					<a href="https://codecov.io/gh/judahtanthony/node-aescrypt"><img src="https://img.shields.io/codecov/c/github/judahtanthony/node-aescrypt.svg" alt="Codecov"></a>
				<a href="https://github.com/judahtanthony/node-aescrypt"><img src="https://img.shields.io/github/stars/judahtanthony/node-aescrypt.svg?style=social&logo=github&label=Stars" alt="GitHub Stars"></a></p>
				<p>A node implementation of the AES Crypt <a href="https://www.aescrypt.com/">https://www.aescrypt.com/</a> file encryption format.</p>
				<a href="#how-to-use-this-package" id="how-to-use-this-package" style="color: inherit; text-decoration: none;">
					<h2>How to use this package</h2>
				</a>
				<p>This package exposes two different interfaces.  If you are just interested in encrypting secrets on your own workstation, you can use the CLI version.  If you want to use this in an node application, you can import the node library.</p>
				<a href="#cli" id="cli" style="color: inherit; text-decoration: none;">
					<h3>CLI</h3>
				</a>
				<p>This simplest way to get started encrypting files is to use NPX to use the executable without necessarily &quot;installing&quot; it.  To encrypt a local file you can simply execute:</p>
				<pre><code class="language-bash">$ npx node-aescrypt -e -p SUPER_SECURE_PASSWORD README.md</code></pre>
				<p>In this case, I&#39;m encrypting the file README.md.  After this command executes, you will see a new file in your current directory called <code>README.me.aes</code>.  To decrypt this file you can use:</p>
				<pre><code class="language-bash">$ npx node-aescrypt -d -p SUPER_SECURE_PASSWORD README.md.aes</code></pre>
				<p>This will recreate the <code>README.md</code> file.</p>
				<p>For a little more complicated of an example, you can pipe in data from the command line, so you could archive, compress, and then encrypt a directory like this:</p>
				<pre><code class="language-bash">$ tar -czf - -C src/ . | npx node-aescrypt -e -p SUPER_SECURE_PASSWORD -o my-src.tgz.aes</code></pre>
				<p>And then if you wanted to reconstitue that directory, you can move the <code>my-src.tgz.aes</code> file where ever you need it and execute:</p>
				<pre><code class="language-bash">$ npx node-aescrypt -d -p SUPER_SECURE_PASSWORD -o - my-src.tgz.aes | tar -pxzf -</code></pre>
				<a href="#library" id="library" style="color: inherit; text-decoration: none;">
					<h3>Library</h3>
				</a>
				<p>The primary reason I built this package was actually to integrate it into build systems.  I planned to use the simple AES Crypt <a href="https://www.aescrypt.com/">https://www.aescrypt.com/</a> app to encrypt secrets, and then this library, which is binarily compatibile with it, to decrypt on the fly using ENV variables to store my password.</p>
				<p>To use the library version you should import the <code>Decrypt</code> or <code>Encrypt</code> classes from the module.  These classes implement the node <code>stream.Transform</code> interface, so that they can be piped through by any <code>Readable</code> and/or <code>Writable</code> stream.  So for example if you wanted to encrypt a file you could do this:</p>
				<pre><code class="language-js"><span class="hljs-keyword">import</span> { createReadStream, createWriteStream } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;
<span class="hljs-keyword">import</span> { Encrypt } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node-aescrypt&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = createReadStream(<span class="hljs-string">&#x27;somefile.txt&#x27;</span>);
<span class="hljs-keyword">const</span> to = createWriteStream(<span class="hljs-string">&#x27;somefile.txt.aes&#x27;</span>);
<span class="hljs-keyword">const</span> through = <span class="hljs-keyword">new</span> Encrypt(<span class="hljs-string">&#x27;SUPER_SECURE_PASSWORD&#x27;</span>);

<span class="hljs-keyword">from</span>
  .pipe(through)
  .pipe(to)
  .on(<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&#x27;Oh no!  Something went wrong.&#x27;</span>))
  .on(<span class="hljs-string">&#x27;finish&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;All done.&#x27;</span>));</code></pre>
				<p>For decrypting, it is the exact same process, but make sure the <code>from</code> stream is your encrypted file, the <code>to</code> stream is to a new file to put the decrypted data into, and you use the <code>Decrypt</code> class instead of the <code>Encrypt</code> class.</p>
				<p>This makes the library very flexible because you can chain these streams in many different ways.  For example, you could pipe the data through a Zlip <a href="https://nodejs.org/api/zlib.html">https://nodejs.org/api/zlib.html</a> transformer before you pipe it through the <code>Encrypt</code> object.  You could even serve it from a server by piping it into an <code>http.ServerResponse</code> <a href="https://nodejs.org/api/http.html#http_class_http_serverresponse">https://nodejs.org/api/http.html#http_class_http_serverresponse</a> object.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/cli.html" class="tsd-kind-icon">CLI</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/decrypt.html" class="tsd-kind-icon">Decrypt</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/encrypt.html" class="tsd-kind-icon">Encrypt</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/encryptioncredentials.html" class="tsd-kind-icon">Encryption<wbr>Credentials</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/options.html" class="tsd-kind-icon">Options</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#transformcallback" class="tsd-kind-icon">Transform<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#withstreamcallback" class="tsd-kind-icon">With<wbr>Stream<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#aescrypt_file_format_version" class="tsd-kind-icon">AESCRYPT_<wbr>FILE_<wbr>FORMAT_<wbr>VERSION</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#cli_help_text" class="tsd-kind-icon">CLI_<wbr>HELP_<wbr>TEXT</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#known_contents" class="tsd-kind-icon">KNOWN_<wbr>CONTENTS</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#known_test_file" class="tsd-kind-icon">KNOWN_<wbr>TEST_<wbr>FILE</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#known_test_password" class="tsd-kind-icon">KNOWN_<wbr>TEST_<wbr>PASSWORD</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#name" class="tsd-kind-icon">NAME</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#version" class="tsd-kind-icon">VERSION</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#app" class="tsd-kind-icon">app</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#pkg" class="tsd-kind-icon">pkg</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#gethmac" class="tsd-kind-icon">getHMAC</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getkey" class="tsd-kind-icon">get<wbr>Key</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getlengthwritable" class="tsd-kind-icon">get<wbr>Length<wbr>Writable</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getrandomreadable" class="tsd-kind-icon">get<wbr>Random<wbr>Readable</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#readpackagejson" class="tsd-kind-icon">read<wbr>Package<wbr>Json</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#tostream" class="tsd-kind-icon">to<wbr>Stream</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#withstream" class="tsd-kind-icon">with<wbr>Stream</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>